---
- name: create docker_plex group
  group:
    name: docker_plex
    gid: 2020
    state: present
  check_mode: no

- name: create docker_plex user
  user:
    name: docker_plex
    uid: 2020
    groups: docker_plex,docker
  check_mode: no

- name: create docker plex_nfs folder (for local configs)
  file:
    state: directory
    path: "/data/docker/plex_nfs/config"
    owner: docker_plex
    group: docker_plex

- name: include mounts tasks
  include_tasks: mounts.yml

- name: include container tasks
  include_tasks: container.yml



#- name: Manage docker container
#  include: container.yml

# TODO: LUKS

# zpool create tank raidz sdc sdd sde cache sda
# zfs create tank/data0


# TODO: create volumes in tw_cli
# TODO: create zpool, vdev's
# TODO: create L2ARC
# TODO: create plex data folders
# TODO: https://galaxy.ansible.com/marvinpinto/docker-plex/

# TODO: enable docker
# TODO: start docker

# TODO: Firewalld stuff (still disabled)
# TODO: enable / start nfs-server

# ssh keys

# set up raid disks

## single's

# zpool

# exports

# docker container
